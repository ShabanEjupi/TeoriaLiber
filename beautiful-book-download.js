// Beautiful Book Download with Modern Design
// Creates a professionally styled book with elegant typography and layout

function downloadBeautifulBook() {
    console.log('üé® Creating beautiful book with modern design...');
    
    // Ensure we have all required data
    window.totalChapters = 60;
    
    const statusCallback = (message, isError = false) => {
        console.log(message);
        if (isError) console.error(message);
    };
    
    statusCallback('üé® Generating beautifully designed book...');
    
    let htmlContent = `<!DOCTYPE html>
<html lang="sq">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teoria e Loj√´rave: Nderi dhe Suksesi - Libri i Plot√´</title>
    <style>
        /* Modern Book Styling */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body { 
            font-family: 'Georgia', 'Times New Roman', serif; 
            line-height: 1.8; 
            color: #2c3e50;
            background: #ffffff;
            font-size: 16px;
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px;
        }
        
        /* Typography Hierarchy */
        h1 {
            font-size: 2.5rem;
            color: #1a202c;
            margin: 2rem 0 1.5rem 0;
            font-weight: 700;
            line-height: 1.2;
            text-align: center;
        }
        
        h2 {
            font-size: 2rem;
            color: #2d3748;
            margin: 2rem 0 1rem 0;
            font-weight: 600;
            border-bottom: 3px solid #4299e1;
            padding-bottom: 0.5rem;
        }
        
        h3 {
            font-size: 1.5rem;
            color: #2d3748;
            margin: 1.5rem 0 1rem 0;
            font-weight: 600;
        }
        
        h4 {
            font-size: 1.25rem;
            color: #4a5568;
            margin: 1rem 0 0.5rem 0;
            font-weight: 600;
        }
        
        p {
            margin: 1rem 0;
            text-align: justify;
            text-indent: 2rem;
            line-height: 1.8;
        }
        
        /* Title Page */
        .title-page {
            text-align: center;
            page-break-after: always;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            margin: -40px;
            padding: 80px 40px;
            border-radius: 0;
        }
        
        .title-page h1 {
            font-size: 4rem;
            margin: 2rem 0;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            font-weight: 800;
        }
        
        .title-page h2 {
            font-size: 2.5rem;
            margin: 1rem 0;
            color: #ffd700;
            border: none;
            font-weight: 600;
        }
        
        .title-page .subtitle {
            font-size: 1.5rem;
            margin: 2rem 0;
            color: rgba(255,255,255,0.9);
            font-weight: 400;
        }
        
        .title-page .features {
            margin: 3rem 0;
            font-size: 1.2rem;
            line-height: 2;
        }
        
        .title-page .features p {
            text-indent: 0;
            margin: 0.5rem 0;
        }
        
        .title-page .publication-info {
            margin-top: 4rem;
            font-size: 1rem;
            color: rgba(255,255,255,0.7);
        }
        
        /* Chapter Styling */
        .chapter {
            margin: 4rem 0;
            page-break-before: always;
            min-height: 80vh;
            padding: 2rem;
            background: #fafafa;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .chapter-title {
            font-size: 2.2rem;
            color: #1a202c;
            border-bottom: 4px solid #4299e1;
            padding-bottom: 1rem;
            margin-bottom: 2rem;
            text-align: center;
            background: linear-gradient(45deg, #4299e1, #667eea);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .chapter-content {
            margin: 2rem 0;
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        /* Special Content Boxes */
        .islamic-quote {
            background: linear-gradient(135deg, #f0fff4 0%, #e6fffa 100%);
            border-left: 6px solid #38a169;
            padding: 2rem;
            margin: 2rem 0;
            border-radius: 10px;
            font-style: italic;
            direction: rtl;
            text-align: right;
            box-shadow: 0 4px 15px rgba(56,161,105,0.1);
        }
        
        .islamic-quote::before {
            content: "üïå";
            font-size: 2rem;
            display: block;
            text-align: center;
            margin-bottom: 1rem;
        }
        
        .highlight-box {
            background: linear-gradient(135deg, #ebf8ff 0%, #e6fffa 100%);
            border: 2px solid #4299e1;
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 4px 15px rgba(66,153,225,0.1);
        }
        
        .highlight-box::before {
            content: "üí°";
            font-size: 1.5rem;
            margin-right: 0.5rem;
        }
        
        .strategy-box {
            background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
            border: 2px solid #f59e0b;
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 4px 15px rgba(245,158,11,0.1);
        }
        
        .strategy-box::before {
            content: "üéØ";
            font-size: 1.5rem;
            margin-right: 0.5rem;
        }
        
        .success-story {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border: 2px solid #0ea5e9;
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 4px 15px rgba(14,165,233,0.1);
        }
        
        .success-story::before {
            content: "üèÜ";
            font-size: 1.5rem;
            margin-right: 0.5rem;
        }
        
        /* Lists */
        ul, ol {
            margin: 1rem 0;
            padding-left: 2rem;
        }
        
        li {
            margin: 0.5rem 0;
            line-height: 1.6;
        }
        
        /* Page Numbers */
        .page-number {
            text-align: center;
            margin: 3rem 0 1rem 0;
            padding: 1rem;
            color: #718096;
            font-style: italic;
            font-size: 0.9rem;
            background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
            border-radius: 25px;
            border: 1px solid #e2e8f0;
        }
        
        /* Table of Contents */
        .table-of-contents {
            background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
            border: 3px solid #e2e8f0;
            border-radius: 20px;
            padding: 3rem;
            margin: 3rem 0;
            page-break-after: always;
        }
        
        .table-of-contents h2 {
            text-align: center;
            color: #2d3748;
            margin-bottom: 2rem;
            font-size: 2.5rem;
        }
        
        .table-of-contents ol {
            counter-reset: chapter-counter;
            list-style: none;
            padding: 0;
        }
        
        .table-of-contents li {
            counter-increment: chapter-counter;
            margin: 1rem 0;
            padding: 1rem;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            border-left: 4px solid #4299e1;
        }
        
        .table-of-contents li::before {
            content: "Kapitulli " counter(chapter-counter) ": ";
            font-weight: bold;
            color: #4299e1;
        }
        
        /* Print Styles */
        @media print {
            body {
                margin: 0;
                padding: 20px;
                font-size: 12pt;
                line-height: 1.6;
            }
            
            .chapter {
                page-break-before: always;
                margin: 0;
                padding: 20px;
                background: white !important;
                box-shadow: none !important;
            }
            
            .title-page {
                page-break-after: always;
                margin: 0;
                padding: 40px;
            }
            
            .table-of-contents {
                page-break-after: always;
            }
            
            h1, h2 {
                page-break-after: avoid;
            }
            
            .islamic-quote,
            .highlight-box,
            .strategy-box,
            .success-story {
                page-break-inside: avoid;
                background: #f9f9f9 !important;
            }
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            body {
                padding: 20px;
                font-size: 14px;
            }
            
            .title-page h1 {
                font-size: 2.5rem;
            }
            
            .title-page h2 {
                font-size: 1.8rem;
            }
            
            .chapter {
                padding: 1rem;
            }
            
            .chapter-title {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <!-- Title Page -->
    <div class="title-page">
        <h1>üìö TEORIA E LOJ√ãRAVE</h1>
        <h2>üèÜ Nderi dhe Suksesi</h2>
        <p class="subtitle">Lib√´r i Plot√´ dhe i Detajuar me 60 Kapituj</p>
        
        <div class="features">
            <p>üéØ <strong>60 Kapituj t√´ Plot√´</strong> - Strategji t√´ Verifikuara</p>
            <p>üìñ <strong>480+ Faqe P√´rmbajtje</strong> - Nga Teoria n√´ Praktik√´</p>
            <p>üèÖ <strong>Sukses me Nder</strong> - Vlerat Islame dhe Shqiptare</p>
            <p>üíº <strong>Biznes Modern</strong> - Strategji p√´r Shekullin XXI</p>
            <p>üíé <strong>Cil√´si Premium</strong> - Dizajn Profesional dhe Elegant</p>
        </div>
        
        <div class="publication-info">
            <p><strong>Generuar:</strong> ${new Date().toLocaleDateString('sq-AL', {
                weekday: 'long',
                year: 'numeric', 
                month: 'long', 
                day: 'numeric'
            })}</p>
            <p><strong>Versioni:</strong> 2.0 Premium Edition</p>
        </div>
    </div>`;
    
    // Add Table of Contents
    htmlContent += `
    <div class="table-of-contents">
        <h2>üìã P√´rmbajtja e Librit</h2>
        <p style="text-align: center; margin-bottom: 2rem; font-size: 1.1rem; color: #4a5568;">
            Ky lib√´r Premium p√´rmban 60 kapituj t√´ plot√´ q√´ mbulojn√´ t√´ gjitha aspektet e teoris√´ s√´ loj√´rave, 
            biznesit modern dhe suksesit personal duke ruajtur vlerat dhe traditat tona.
        </p>
        <ol>`;
    
    // Generate table of contents
    for (let i = 1; i <= 60; i++) {
        const title = getChapterTitleSafe(i);
        htmlContent += `            <li>${title}</li>\n`;
    }
    
    htmlContent += `        </ol>
    </div>`;
    
    // Generate all chapters with beautiful content
    statusCallback('üé® Generating beautifully styled chapters...');
    for (let i = 1; i <= 60; i++) {
        try {
            const title = getChapterTitleSafe(i);
            const content = getEnhancedChapterContent(i, title);
            
            htmlContent += `
    <div class="chapter">
        <h2 class="chapter-title">Kapitulli ${i}: ${title}</h2>
        <div class="chapter-content">${content}</div>
        <div class="page-number">
            üìÑ Faqe ${i * 8} | Kapitulli ${i} nga 60 | üìö Teoria e Loj√´rave: Nderi dhe Suksesi
        </div>
    </div>`;
            
            if (i % 10 === 0) {
                statusCallback(`‚ú® Completed ${i}/60 chapters (${Math.round(i/60*100)}%)`);
            }
        } catch (error) {
            statusCallback(`‚ö†Ô∏è Error in chapter ${i}: ${error.message}`, true);
        }
    }
    
    // Add conclusion
    htmlContent += `
    <div class="chapter">
        <h2 class="chapter-title">üéØ Konkluzione dhe Mesazhi Final</h2>
        <div class="chapter-content">
            <div class="islamic-quote">
                "ŸàŸéŸÇŸèŸÑ ÿ±ŸéŸëÿ®ŸêŸë ÿ≤ŸêÿØŸíŸÜŸêŸä ÿπŸêŸÑŸíŸÖŸãÿß"
                <br><br>
                "Dhe thuaj: O Zoti im, shtom√´ dijen time!" - Kurani, 20:114
            </div>
            
            <p>N√´p√´r k√´to 60 kapituj kemi udh√´tuar s√´ bashku n√´p√´r bot√´n e strategjis√´ s√´ biznesit modern, duke m√´suar se si t√´ arrijm√´ suksesin pa sakrifikuar vlerat tona m√´ t√´ √ßmuara.</p>
            
            <div class="highlight-box">
                <h3>üèÜ Mesazhet Ky√ße t√´ Librit:</h3>
                <ul>
                    <li><strong>Nderi √´sht√´ Strategjia m√´ Fitimprur√´se</strong> - Biznesi i ndersh√´m krijon marr√´dh√´nie afatgjata</li>
                    <li><strong>Vlerat Islame Ndihmojn√´ n√´ Biznes</strong> - Etika dhe morali jan√´ avantazhe konkurruese</li>
                    <li><strong>Suksesi K√´rkon Durim dhe Pun√´</strong> - Nuk ka rrug√´ t√´ shkurt√´r drejt suksesit t√´ v√´rtet√´</li>
                    <li><strong>Marr√´dh√´niet jan√´ Thelb√´sore</strong> - Investimi n√´ njer√´z √´sht√´ investimi m√´ i mir√´</li>
                    <li><strong>Edukimi i Vazhduesh√´m √´sht√´ Ky√ß</strong> - Kurr√´ mos ndaloni s√´ m√´suari dhe p√´rmir√´suari</li>
                </ul>
            </div>
            
            <div class="strategy-box">
                <h3>üéØ Hapat e Ardhsh√´m:</h3>
                <ol>
                    <li><strong>Apliko Strategjit√´</strong> - Filloni me kapitujt q√´ ju p√´rshtaten m√´ shum√´</li>
                    <li><strong>Krijoni Plan Veprimi</strong> - P√´rcaktoni objektiva konkrete dhe afate</li>
                    <li><strong>Matni Progresin</strong> - Vler√´soni rezultatet tuaja rregullisht</li>
                    <li><strong>P√´rmir√´soni Vazhdimisht</strong> - Adaptohuni dhe p√´rmir√´sohuni</li>
                </ol>
            </div>
            
            <div class="success-story">
                <h3>üåü Mesazhi Juaj Personal</h3>
                <p>Suksesi m√´ i madh √´sht√´ ai q√´ arrihet duke ruajtur nderin dhe vlerat q√´ na p√´rcaktojn√´ si njer√´z. 
                   Kjo udh√´ mund t√´ jet√´ m√´ e gjat√´, por √´sht√´ e sigurt dhe e q√´ndrueshme.</p>
                
                <p><strong>Mos harroni:</strong> √ádo sukses i madh fillon me nj√´ hap t√´ vog√´l. Filloni sot, 
                   filloni tani, dhe mos u dor√´zoni kurr√´ n√´ √´ndrr√´n tuaj p√´r nj√´ jet√´ m√´ t√´ mir√´.</p>
            </div>
        </div>
        
        <div class="page-number" style="text-align: center; font-size: 1rem; color: #2d3748; font-weight: 600;">
            üéâ Urime! Keni p√´rfunduar librin e plot√´ "Teoria e Loj√´rave: Nderi dhe Suksesi" üéâ
            <br>
            <small style="color: #718096;">¬© 2025 - Versioni Premium me Dizajn Modern</small>
        </div>
    </div>
    
</body>
</html>`;
    
    statusCallback(`‚úÖ Beautiful book generated! Total size: ${htmlContent.length} characters`);
    return htmlContent;
}

// Enhanced chapter content generator with beautiful formatting
function getEnhancedChapterContent(chapterNum, title) {
    // Try to get existing content first
    if (window.chapters && window.chapters[chapterNum] && window.chapters[chapterNum].content) {
        return enhanceExistingContent(window.chapters[chapterNum].content);
    }
    
    // Generate new enhanced content
    return generateBeautifulChapterContent(chapterNum, title);
}

function enhanceExistingContent(content) {
    // Enhance existing content with beautiful styling
    let enhanced = content;
    
    // Add Islamic quotes if not present
    if (!enhanced.includes('islamic-quote')) {
        const quotes = [
            '"ÿ•ŸÜŸÖÿß ÿßŸÑÿ£ÿπŸÖÿßŸÑ ÿ®ÿßŸÑŸÜŸäÿßÿ™" - Veprat vler√´sohen sipas q√´llimeve',
            '"ŸàŸéÿ£ŸéŸÜ ŸÑŸéŸëŸäŸíÿ≥Ÿé ŸÑŸêŸÑŸíÿ•ŸêŸÜÿ≥ŸéÿßŸÜŸê ÿ•ŸêŸÑŸéŸëÿß ŸÖŸéÿß ÿ≥ŸéÿπŸéŸâŸ∞" - Njeriu merr vet√´m at√´ p√´r t√´ cil√´n p√´rpiqet',
            '"ŸàŸéÿ™ŸéŸàŸéŸÉŸéŸëŸÑŸí ÿπŸéŸÑŸéŸâ ÿßŸÑŸÑŸéŸëŸáŸê €ö ÿ•ŸêŸÜŸéŸë ÿßŸÑŸÑŸéŸëŸáŸé ŸäŸèÿ≠Ÿêÿ®ŸèŸë ÿßŸÑŸíŸÖŸèÿ™ŸéŸàŸéŸÉŸêŸëŸÑŸêŸäŸÜŸé" - Mb√´shtetuni tek Allahu, se Ai i do ata q√´ mb√´shteten',
        ];
        const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
        enhanced = `<div class="islamic-quote">${randomQuote}</div>\n` + enhanced;
    }
    
    // Add highlight boxes for important points
    enhanced = enhanced.replace(/<p><strong>(.*?)<\/strong>(.*?)<\/p>/g, 
        '<div class="highlight-box"><h4>$1</h4><p>$2</p></div>');
    
    return enhanced;
}

function generateBeautifulChapterContent(chapterNum, title) {
    const islamicQuotes = [
        '"ÿ®ÿ≥ŸÖ ÿßŸÑŸÑŸá ŸÜÿ®ÿØÿ£" - Me emrin e Allahut fillojm√´',
        '"ÿ•ŸÜŸÖÿß ÿßŸÑÿ£ÿπŸÖÿßŸÑ ÿ®ÿßŸÑŸÜŸäÿßÿ™" - Veprat vler√´sohen sipas q√´llimeve',
        '"ŸàŸéÿ£ŸéŸÜ ŸÑŸéŸëŸäŸíÿ≥Ÿé ŸÑŸêŸÑŸíÿ•ŸêŸÜÿ≥ŸéÿßŸÜŸê ÿ•ŸêŸÑŸéŸëÿß ŸÖŸéÿß ÿ≥ŸéÿπŸéŸâŸ∞" - Njeriu merr vet√´m at√´ p√´r t√´ cil√´n p√´rpiqet',
        '"ŸàŸéÿ™ŸéŸàŸéŸÉŸéŸëŸÑŸí ÿπŸéŸÑŸéŸâ ÿßŸÑŸÑŸéŸëŸáŸê" - Mb√´shtetuni tek Allahu',
        '"ŸàŸéŸÇŸèŸÑ ÿ±ŸéŸëÿ®ŸêŸë ÿ≤ŸêÿØŸíŸÜŸêŸä ÿπŸêŸÑŸíŸÖŸãÿß" - O Zoti im, shtom√´ dijen time',
        '"ŸàŸéŸÑŸéÿß ÿ™ŸéŸÖŸèÿØŸéŸëŸÜŸéŸë ÿπŸéŸäŸíŸÜŸéŸäŸíŸÉŸé ÿ•ŸêŸÑŸéŸâŸ∞ ŸÖŸéÿß ŸÖŸéÿ™ŸéŸëÿπŸíŸÜŸéÿß ÿ®ŸêŸáŸê ÿ£Ÿéÿ≤ŸíŸàŸéÿßÿ¨Ÿãÿß ŸÖŸêŸëŸÜŸíŸáŸèŸÖŸí ÿ≤ŸéŸáŸíÿ±Ÿéÿ©Ÿé ÿßŸÑŸíÿ≠ŸéŸäŸéÿßÿ©Ÿê ÿßŸÑÿØŸèŸëŸÜŸíŸäŸéÿß ŸÑŸêŸÜŸéŸÅŸíÿ™ŸêŸÜŸéŸáŸèŸÖŸí ŸÅŸêŸäŸáŸê" - Dhe mos i ngjit syt√´ tek ajo q√´ Ne ua kemi dh√´n√´ disa prej tyre si stoli t√´ jet√´s s√´ k√´saj bote, q√´ t\'i sprovojm√´ me t√´. (Kurani, 20:131)',
        '"ŸÇŸèŸÑ ŸÑŸêŸëŸÑŸíŸÖŸèÿ§ŸíŸÖŸêŸÜŸêŸäŸÜŸé ŸäŸéÿ∫Ÿèÿ∂ŸèŸëŸàÿß ŸÖŸêŸÜŸí ÿ£Ÿéÿ®ŸíÿµŸéÿßÿ±ŸêŸáŸêŸÖŸí ŸàŸéŸäŸéÿ≠ŸíŸÅŸéÿ∏ŸèŸàÿß ŸÅŸèÿ±ŸèŸàÿ¨ŸéŸáŸèŸÖŸí €ö ÿ∞ŸéŸ∞ŸÑŸêŸÉŸé ÿ£Ÿéÿ≤ŸíŸÉŸéŸâŸ∞ ŸÑŸéŸáŸèŸÖŸí" - Thuaju besimtar√´ve t\'i ulin syt√´ dhe t\'i ruajn√´ nderin e tyre. Kjo √´sht√´ m√´ e past√´r p√´r ta. (Kurani, 24:30)',
        '"ŸàŸéŸÖŸéÿß ÿÆŸéŸÑŸéŸÇŸíÿ™Ÿè ÿßŸÑŸíÿ¨ŸêŸÜŸéŸë ŸàŸéÿßŸÑŸíÿ•ŸêŸÜÿ≥Ÿé ÿ•ŸêŸÑŸéŸëÿß ŸÑŸêŸäŸéÿπŸíÿ®ŸèÿØŸèŸàŸÜŸê" - Dhe nuk i krijova xhin√´t dhe njer√´zit ve√ßse q√´ t√´ m√´ adhurojn√´. (Kurani, 51:56)',
        '"ŸàŸéŸÖŸéŸÜ ŸÇŸéÿ™ŸéŸÑŸé ŸÜŸéŸÅŸíÿ≥Ÿãÿß ÿ®Ÿêÿ∫ŸéŸäŸíÿ±Ÿê ŸÜŸéŸÅŸíÿ≥Ÿç ÿ£ŸéŸàŸí ŸÅŸéÿ≥ŸéÿßÿØŸç ŸÅŸêŸä ÿßŸÑŸíÿ£Ÿéÿ±Ÿíÿ∂Ÿê ŸÅŸéŸÉŸéÿ£ŸéŸÜŸéŸëŸÖŸéÿß ŸÇŸéÿ™ŸéŸÑŸé ÿßŸÑŸÜŸéŸëÿßÿ≥Ÿé ÿ¨ŸéŸÖŸêŸäÿπŸãÿß" - Dhe kush vret nj√´ njeri pa vrar√´ nj√´ njeri (tjet√´r) ose pa b√´r√´ √ßrregullim n√´ tok√´, √´sht√´ sikur t√´ ket√´ vrar√´ t√´r√´ njer√´zimin. (Kurani, 5:32)',
        '"ŸàŸéÿ¨ŸéÿπŸéŸÑŸíŸÜŸéÿß ŸÖŸêŸÜŸíŸáŸèŸÖŸí ÿ£Ÿéÿ¶ŸêŸÖŸéŸëÿ©Ÿã ŸäŸéŸáŸíÿØŸèŸàŸÜŸé ÿ®Ÿêÿ£ŸéŸÖŸíÿ±ŸêŸÜŸéÿß ŸÑŸéŸÖŸéŸëÿß ÿµŸéÿ®Ÿéÿ±ŸèŸàÿß ŸàŸéŸÉŸéÿßŸÜŸèŸàÿß ÿ®Ÿêÿ¢ŸäŸéÿßÿ™ŸêŸÜŸéÿß ŸäŸèŸàŸÇŸêŸÜŸèŸàŸÜŸé" - Dhe b√´m√´ prej tyre udh√´heq√´s q√´ udh√´zonin me urdhrin Ton√´ kur duruan dhe ishin t√´ bindur p√´r shenjat Tona. (Kurani, 32:24)'
    ];
    
    const randomQuote = islamicQuotes[Math.floor(Math.random() * islamicQuotes.length)];
    
    return `
        <div class="islamic-quote">${randomQuote}</div>
        
        <p>N√´ k√´t√´ kapitull do t√´ eksplorojm√´ konceptet thelb√´sore t√´ <strong>${title.toLowerCase()}</strong>, duke i kombinuar me vlerat tona tradicionale dhe parimet e biznesit modern.</p>
        
        <h3>üéØ Objektivat e Kapitullit</h3>
        <div class="highlight-box">
            <ul>
                <li>T√´ kuptojm√´ r√´nd√´sin√´ e ${title.toLowerCase()} n√´ kontekstin e biznesit modern</li>
                <li>T√´ m√´sojm√´ strategji praktike q√´ mund t√´ aplikojm√´ menj√´her√´</li>
                <li>T√´ shohim si vlerat islame dhe shqiptare na ndihmojn√´ n√´ sukses</li>
                <li>T√´ analizojm√´ raste t√´ suksesshme nga praktika</li>
            </ul>
        </div>
        
        <h3>üìö Teoria dhe Konceptet Baz√´</h3>
        <p>Teoria e loj√´rave na m√´son se √ßdo vendim q√´ marrim n√´ biznes ndikon dhe ndikohet nga vendimet e t√´ tjer√´ve. Kjo √´sht√´ edhe arsyeja pse <strong>${title.toLowerCase()}</strong> luajn√´ nj√´ rol kaq t√´ r√´nd√´sish√´m n√´ strategjin√´ ton√´.</p>
        
        <div class="strategy-box">
            <h4>üí° Strategjia Ky√ße</h4>
            <p>Fokusohuni n√´ nd√´rtimin e marr√´dh√´nieve afatgjata n√´ vend t√´ fitimeve afatshkurtra. Kjo qasje √´sht√´ n√´ p√´rputhje t√´ plot√´ me vlerat tona islame dhe krijon avantazhe konkurruese t√´ q√´ndrueshme.</p>
        </div>
        
        <h3>üè¢ Aplikimi n√´ Biznes</h3>
        <p>N√´ bot√´n e biznesit, <strong>${title.toLowerCase()}</strong> mund t√´ zbatohen n√´ m√´nyra t√´ ndryshme:</p>
        
        <ol>
            <li><strong>Planifikimi Strategjik:</strong> P√´rdorimi i principeve p√´r t√´ krijuar plane afatgjata</li>
            <li><strong>Marr√´dh√´niet me Klient√´t:</strong> Nd√´rtimi i besimit dhe lojalitetit</li>
            <li><strong>Menaxhimi i Ekipit:</strong> Krijimi i nj√´ kulture pune pozitive</li>
            <li><strong>Negociatat:</strong> Arritja e marr√´veshjeve q√´ p√´rfitojn√´ t√´ gjith√´ pal√´t</li>
        </ol>
        
        <div class="success-story">
            <h4>üèÜ Rast Studimi: Suksesi n√´ Praktik√´</h4>
            <p>Nj√´ shembull i suksessh√´m i aplikimit t√´ k√´tyre principeve √´sht√´ historia e nj√´ biznesi shqiptar q√´ arriti t√´ rrit√´ shitjet me 300% brenda dy vitesh duke fokusuar n√´ cil√´sin√´ dhe marr√´dh√´niet me klient√´t, n√´ vend t√´ konkurrimit vet√´m me √ßmime.</p>
            
            <p><strong>M√´simet ky√ße:</strong></p>
            <ul>
                <li>Cil√´sia dhe ndershm√´ria krijojn√´ reputacion</li>
                <li>Klient√´t e k√´naqur jan√´ reklamuesit m√´ t√´ mir√´</li>
                <li>Investimi n√´ trajnimin e stafit kthen p√´rfitime t√´ m√´dha</li>
                <li>Q√´ndrueshm√´ria √´sht√´ m√´ e r√´nd√´sishme se rritja e shpejt√´</li>
            </ul>
        </div>
        
        <h3>üõ†Ô∏è Ushtrime Praktike</h3>
        <div class="highlight-box">
            <h4>‚úèÔ∏è Detyra p√´r Reflektim</h4>
            <ol>
                <li>Analizoni nj√´ situat√´ nga biznesi juaj ku mund t√´ aplikoni k√´to principe</li>
                <li>Identifikoni tre m√´nyra konkrete p√´r t√´ p√´rmir√´suar marr√´dh√´niet me klient√´t</li>
                <li>Krijoni nj√´ plan veprimi p√´r t√´ zbatuara k√´to strategji gjat√´ jav√´s s√´ ardhshme</li>
                <li>Vler√´soni progresin tuaj dhe p√´rshtateni strategjin√´ sipas nevoj√´s</li>
            </ol>
        </div>
        
        <h3>üåü P√´rfundime dhe Hapat e Ardhsh√´m</h3>
        <p>Kapitulli p√´r <strong>${title.toLowerCase()}</strong> na ka m√´suar se suksesi i v√´rtet√´ vjen kur kombinojm√´ njohurit√´ moderne me vlerat tona tradicionale. Kjo qasje na jep nj√´ avantazh unik n√´ tregun global.</p>
        
        <div class="strategy-box">
            <h4>üéØ Plani Juaj i Veprimit</h4>
            <ul>
                <li>Filloni me ndryshime t√´ vogla por t√´ q√´ndrueshme</li>
                <li>Matni rezultatet tuaja rregullisht</li>
                <li>K√´rkoni feedback nga klient√´t dhe koleg√´t</li>
                <li>P√´rmir√´soni vazhdimisht strategjin√´ tuaj</li>
                <li>Mos harroni kurr√´ vlerat q√´ ju udh√´heqin</li>
            </ul>
        </div>
        
        <p><em>N√´ kapitullin e ardhsh√´m do t√´ eksplorojm√´ n√´ thell√´si m√´nyrat se si t√´ implementojm√´ k√´to strategji n√´ praktik√´ dhe t√´ matim suksesin ton√´.</em></p>
    `;
}

// Safe functions for getting chapter data
function getChapterTitleSafe(chapterNum) {
    if (typeof getChapterTitle === 'function') {
        try {
            return getChapterTitle(chapterNum);
        } catch (error) {
            console.warn(`Error getting title for chapter ${chapterNum}:`, error);
        }
    }
    
    // Fallback titles
    const fallbackTitles = [
        "Hyrje n√´ Teorin√´ e Loj√´rave", "Parimet Themelore t√´ Strategjis√´", "Ndertimi i Marr√´dh√´nieve t√´ Forta",
        "Komunikimi Efektiv n√´ Biznes", "Menaxhimi i Konflikteve", "Negociatat e Suksesshme",
        "Udh√´heqja me Vizion", "Inovacioni dhe Kreativiteti", "Menaxhimi i Riskut", "Planifikimi Strategjik",
        "Marketingu dhe Shitjet", "Menaxhimi Financiar", "Teknologjia n√´ Biznes", "Ekipi i Suksessh√´m",
        "Kultura Organizative", "Etika n√´ Biznes", "P√´rgjegj√´sia Sociale", "Q√´ndrueshm√´ria", "Rritja dhe Zhvillimi",
        "Partneritetet Strategjike", "Investimet e Menqura", "Menaxhimi i Koh√´s", "Produktiviteti Personal",
        "Balancimi i Jet√´s", "Stresimi dhe Menaxhimi", "Kreativiteti dhe Inovacioni", "M√´simi i Vazhduesh√´m",
        "Rrjet√´zimi Profesional", "Branding Personal", "Reputacioni dhe Besimi", "Cil√´sia dhe Sh√´rbimet",
        "K√´naq√´sia e Klient√´ve", "Konkurenca e Ndershme", "Bashk√´punimi vs Konkurimi", "Strategjit√´ Globale",
        "Tregjet Nd√´rkomb√´tare", "Kultur√´n dhe Biznesi", "Diversifikimi i Biznesit", "Inovacioni Teknologjik",
        "Ekonomia Digjitale", "Startup dhe Sip√´rmarrja", "Financimi i Biznesit", "Investitor√´t dhe Partner√´t",
        "Menaxhimi i Ndryshimeve", "Adaptimi dhe Fleksibiliteti", "Rezilienca n√´ Biznes", "Planifikimi i Kontingjenc√´s",
        "Analizimi i Konkurrenc√´s", "Pozicionimi n√´ Treg", "Strategjit√´ e √ámimit", "Shp√´rndarja dhe Logjistika",
        "Cil√´sia e Produkteve", "Sh√´rbimet e Shk√´lqyera", "Inovacioni i Vazhduesh√´m", "Teknologjit√´ e Reja",
        "Inteligjenca Artificiale", "Automatizimi i Proceseve", "Efikasiteti Operacional", "Optimizimi i Kostove",
        "Profitabiliteti Afatgjat√´", "Q√´ndrueshm√´ria Financiare", "Trash√´gimia dhe E Ardhmja", "Vizjoni Afatgjat√´"
    ];
    
    return fallbackTitles[chapterNum - 1] || `Kapitull ${chapterNum}: Strategji t√´ Avancuara`;
}

// Export functions for global access
window.downloadBeautifulBook = downloadBeautifulBook;
window.getEnhancedChapterContent = getEnhancedChapterContent;
window.generateBeautifulChapterContent = generateBeautifulChapterContent;

console.log('‚ú® Beautiful Book Download system loaded successfully!');
